## Part 1. Готовый докер

Возьми официальный докер-образ с nginx и выкачай его при помощи docker pull.

- ![img](img/1.png)

Проверь наличие докер-образа через docker images.

- ![img](img/2.png)

Запусти докер-образ через docker run -d [image_id|repository].

- ![img](img/3.png)

Проверь, что образ запустился через docker ps.

- ![img](img/4.png)

Посмотри информацию о контейнере через docker inspect [container_id|container_name].

- ![img](img/5.png)
- ![img](img/6.png)
- ![img](img/7.png)
- ![img](img/8.png)

По выводу команды определи и помести в отчёт размер контейнера, список замапленных портов и ip контейнера.

Останови докер контейнер через docker stop [container_id|container_name].

- ![img](img/9.png)

Проверь, что контейнер остановился через docker ps.

Запусти докер с портами 80 и 443 в контейнере, замапленными на такие же порты на локальной машине, через команду run.

- ![img](img/10.png)

Проверь, что в браузере по адресу localhost:80 доступна стартовая страница nginx.

В отчёт помести скрины:

- ![img](img/11.png)

вызова и вывода всех использованных в этой части задания команд;
стартовой страницы nginx по адресу localhost:80 (адрес должен быть виден).



Замечание: Не загружай тяжелые файлы (>10 мб) в гит.

## Part 2. Операции с контейнером

Прочитай конфигурационный файл nginx.conf внутри докер контейнера через команду exec.

- ![img](img/14.png)

Скопируй созданный файл nginx.conf внутрь докер-образа через команду docker cp.

- ![img](img/15.png)

Перезапусти nginx внутри докер-образа через команду exec.

- ![img](img/16.png)

Проверь, что по адресу localhost:80/status отдается страничка со статусом сервера nginx.

- ![img](img/17.png)

Экспортируй контейнер в файл container.tar через команду export.

- ![img](img/18.png)

Останови контейнер.

- ![img](img/19.png)

Удали образ через docker rmi [image_id|repository], не удаляя перед этим контейнеры.

- ![img](img/20.png)

Удали остановленный контейнер.

- ![img](img/21.png)

Импортируй контейнер обратно через команду import.

- ![img](img/22.png)

Запусти импортированный контейнер.

- ![img](img/23.png)

Проверь, что по адресу localhost:80/status отдается страничка со статусом сервера nginx.

- ![img](img/24.png)

В отчёт помести скрины:

содержимое созданного файла nginx.conf;

- ![img](img/53.png)

страницы со статусом сервера nginx по адресу localhost:80/status.

- ![img](img/17.png)



## Part 3. Мини веб-сервер


Напиши мини-сервер на C и FastCgi, который будет возвращать простейшую страничку с надписью Hello World!.

- ![img](img/25.png)

Запусти написанный мини-сервер через spawn-fcgi на порту 8080.

Напиши свой nginx.conf, который будет проксировать все запросы с 81 порта на 127.0.0.1:8080.

- ![img](img/27.png)

Проверь, что в браузере по localhost:81 отдается написанная тобой страничка.

- ![img](img/31.png)

Положи файл nginx.conf по пути ./nginx/nginx.conf (это понадобится позже).

- ![img](img/32.png)

## Part 4. Свой докер

- ![img](img/33.png)

1) собирает исходники мини сервера на FastCgi из Части 3;

2) запускает его на 8080 порту;

3) копирует внутрь образа написанный ./nginx/nginx.conf;

4) запускает nginx.
nginx можно установить внутрь докера самостоятельно, а можно воспользоваться готовым образом с nginx'ом, как базовым.

Собери написанный докер-образ через docker build при этом указав имя и тег.

- ![img](img/35.png)

Проверь через docker images, что все собралось корректно.

- ![img](img/36.png)

Запусти собранный докер-образ с маппингом 81 порта на 80 на локальной машине и маппингом папки ./nginx внутрь контейнера по адресу, где лежат конфигурационные файлы nginx'а (см. Часть 2).

- ![img](img/37.png)

Проверь, что по localhost:81 доступна страничка написанного мини сервера.

- ![img](img/38.png)

Допиши в ./nginx/nginx.conf проксирование странички /status, по которой надо отдавать статус сервера nginx.

- ![img](img/39.png)

Перезапусти докер-образ.
Если всё сделано верно, то, после сохранения файла и перезапуска контейнера, конфигурационный файл внутри докер-образа должен обновиться самостоятельно без лишних действий

- ![img](img/40.png)

Проверь, что теперь по localhost:80/status отдается страничка со статусом nginx

- ![img](img/17.png)

## Part 5. Dockle

Просканируй образ из предыдущего задания через dockle [image_id|repository].

- ![img](img/42.png)


Исправь образ так, чтобы при проверке через dockle не было ошибок и предупреждений.
- ![img](img/46.png)


## Part 6. Базовый Docker Compose

Напиши файл docker-compose.yml, с помощью которого:

1) Подними докер-контейнер из Части 5 (он должен работать в локальной сети, т.е. не нужно использовать инструкцию EXPOSE и мапить порты на локальную машину).

- ![img](img/43.png)

2) Подними докер-контейнер с nginx, который будет проксировать все запросы с 8080 порта на 81 порт первого контейнера.

- ![img](img/44.png)

Замапь 8080 порт второго контейнера на 80 порт локальной машины.

- ![img](img/48.png)

Останови все запущенные контейнеры.

- ![img](img/49.png)

Собери и запусти проект с помощью команд docker-compose build и docker-compose up.
- ![img](img/da.png)
- ![img](img/net.png)

Проверь, что в браузере по localhost:80 отдается написанная тобой страничка, как и ранее.
- ![img](img/52.png)
